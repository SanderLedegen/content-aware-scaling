(function(){"use strict";const x=[[1,0,-1],[2,0,-2],[1,0,-1]],M=[[1,2,1],[0,0,0],[-1,-2,-1]];addEventListener("message",l=>{const{imageData:t,start:o,end:s,width:a,height:n}=l.data,e=g(t,o,s,a,n);postMessage({data:e,start:o})});function g(l,t,o,s,a){const n=new Uint8ClampedArray(o-t);for(let e=t;e<o;e+=4){const c=l[e+3];let m=0,f=0;for(let r=-1;r<=1;r+=1)for(let i=-1;i<=1;i+=1){const k=x[r+1][i+1],v=M[r+1][i+1],h=p(l,s,a,e,r,i);m+=k*h,f+=v*h}const u=Math.sqrt(m**2+f**2);n[e-t+0]=u,n[e-t+1]=u,n[e-t+2]=u,n[e-t+3]=c}return n}function p(l,t,o,s,a,n){let e=s/4%t+n,c=Math.floor(s/4/t)+a;return e=Math.max(0,Math.min(e,t-1)),c=Math.max(0,Math.min(c,o-1)),l[c*t*4+e*4]}})();
